<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<f:view locale="#{localeBean.locale}">
<h:head>
  <title>#{msg['tituloApp']}</title>
  <meta charset="UTF-8" />

  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />

  <style>
    body {
      font-family: 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #e3f2fd, #bbdefb);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    h1 { font-weight: 700; color: #0d47a1; }
    .card { border: none; border-radius: 15px; transition: all 0.3s ease; }
    .card:hover { transform: translateY(-6px); box-shadow: 0 8px 20px rgba(0,0,0,0.2); }
    .card-title { font-size: 1.2rem; font-weight: 600; color: #0d47a1; }
    .logout-btn {
      padding: 10px 22px; background: #e53935; color: white; border: none;
      border-radius: 8px; cursor: pointer; transition: 0.3s;
    }
    .logout-btn:hover { background: #c62828; transform: scale(1.05); }
    footer { text-align: center; margin-top: auto; padding: 20px 0; color: #444; }
  </style>
</h:head>

<h:body>

  <div class="container py-5">

    <!-- Encabezado -->
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h1>#{msg['bienvenidaTitulo']}</h1>
      <!-- Logout -->
      <h:form>
        <h:commandButton value="#{msg['logout']}" 
                         action="#{logoutBean.logout}" 
                         styleClass="btn btn-danger btn-sm" />
      </h:form>
    </div>

    <p class="text-secondary">#{msg['bienvenidaSub']}</p>

    <!-- Selector de idioma -->
    <div class="mb-5">
      <h:form>
        <label>#{msg['idioma']}:</label>
        <h:selectOneMenu value="#{localeBean.language}" onchange="submit()" style="margin-left:10px;">
          <f:selectItem itemLabel="Español" itemValue="es" />
          <f:selectItem itemLabel="English" itemValue="en" />
        </h:selectOneMenu>
      </h:form>
    </div>

    <!-- Tarjetas de deportes -->
    <h:form id="formDeportes">
      <div class="row g-4 justify-content-center">
        <ui:repeat value="#{deporteBean.deportes}" var="dep">
          <div class="col-6 col-md-3">
            <div class="card shadow-sm h-100 text-center" style="cursor:pointer;"
                 onclick="document.getElementById('formDeportes:deporteSeleccionadoHidden').value='#{dep['clave']}';
                          document.getElementById('formDeportes:goDetalle').click();">
              <h:graphicImage library="img" name="#{dep['imagen']}.jpg"
                              alt="#{msg[dep['clave']]}" class="card-img-top"
                              style="height:180px; object-fit:cover;
                                     border-top-left-radius:15px; border-top-right-radius:15px;" />
              <div class="card-body">
                <h5 class="card-title">#{msg[dep['clave']]}</h5>
              </div>
            </div>
          </div>
        </ui:repeat>

        <h:inputHidden id="deporteSeleccionadoHidden"
                       value="#{deporteBean.deporteSeleccionado}" />
        <h:commandButton id="goDetalle" action="#{deporteBean.irADetalle}"
                         style="display:none;" />
      </div>
    </h:form>

    <!-- Acciones generales -->
    <div class="d-flex justify-content-between mt-5">
      <h:form>
        <h:commandButton value="#{msg['volverDeportes']}"
                         action="deportes.xhtml?faces-redirect=true"
                         styleClass="btn btn-secondary" />
      </h:form>

      <h:form>
        <h:commandButton value="#{msg['generarPDF']}"
                         action="#{pdfBean.generarResumenPDF}"
                         styleClass="btn btn-info"
                         disabled="#{empty deporteBean.resumen}" />
      </h:form>

      <h:form>
        <h:commandButton value="#{msg['irFacturacion']}"
                         action="facturacion"
                         styleClass="btn btn-primary"
                         disabled="#{empty deporteBean.resumen}" />
      </h:form>
    </div>

  </div>

  <footer>
    <small>© 2025 SportsTrack</small>
  </footer>

</h:body>
</f:view>
</html>